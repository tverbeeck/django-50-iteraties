{% extends "base.html" %}
{% load static %}
{% load markdown_extras %}

{% block title %}{{ note.title }} â€” {{ SITE_NAME }}{% endblock %}

{% block content %}
  <article style="max-width:60ch;">
    <header style="margin-bottom:1rem;">
      <h1 style="margin:0;">{{ note.title }}</h1>

      {% if note.owner %}
        <p style="color:#555; font-size:.9rem; margin:.25rem 0 0 0;">
          van <strong>{{ note.owner.username }}</strong>
        </p>
      {% endif %}

      {% if note.updated_at %}
        <p style="color:#777; font-size:.8rem; margin:.25rem 0 0 0;">
          Laatst bijgewerkt: {{ note.updated_at|date:"d/m/Y H:i" }}
        </p>
      {% endif %}
    </header>

    {# body/rendered_body: we tonen wat onze view al aanlevert #}
    {% if rendered_body %}
      <div class="note-body">
        {{ rendered_body|safe }}
      </div>
    {% else %}
      <div class="note-body">
        {{ note.body|linebreaksbr }}
      </div>
    {% endif %}
  </article>

  <hr style="margin:2rem 0;" />

  <nav style="display:flex; flex-wrap:wrap; gap:.75rem; font-size:.9rem;">
    <a href="{% url 'notes:list' %}">&larr; Terug naar lijst</a>

    {# beheeracties -> alleen tonen als de view can_manage=True gezet heeft #}
    {% if can_manage %}
      <a href="{% url 'notes:edit' note.pk %}">Bewerk</a>
      <a href="{% url 'notes:delete' note.pk %}">Verwijder</a>
      <a href="{% url 'notes:duplicate' note.pk %}">Dupliceer</a>
    {% endif %}
  </nav>
{% endblock %}

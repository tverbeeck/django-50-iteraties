{% extends "base.html" %}
{% block title %}Notities â€” {{ SITE_NAME }}{% endblock %}
{% block content %}
  <h1>Notities</h1>

  <p><a href="{% url 'notes:new' %}">Nieuwe notitie</a></p>

  {# Filter UI #}
  <section style="margin: 1rem 0; padding: .75rem; border: 1px solid #ccc; border-radius: .5rem; background: #fafafa;">
    <strong>Filter op tag:</strong>

    {# link "Alle" #}
    <a
      href="{% url 'notes:list' %}"
      style="margin-left:.5rem;{% if not active_tag %} font-weight:bold; text-decoration:underline; {% endif %}"
    >
      alles
    </a>

    {# individuele tags #}
    {% for t in all_tags %}
      <a
        href="{% url 'notes:list' %}?tag={{ t.name|urlencode }}"
        style="margin-left:.5rem;{% if active_tag and active_tag|lower == t.name|lower %} font-weight:bold; text-decoration:underline; {% endif %}"
      >
        {{ t.name }}
      </a>
    {% empty %}
      <em style="margin-left:.5rem;">(nog geen tags)</em>
    {% endfor %}
  </section>

  {# titel van de huidige filter #}
  {% if active_tag %}
    <p>Gefilterd op tag: <strong>{{ active_tag }}</strong></p>
  {% endif %}

  <ul>
    {% for n in notes %}
      <li style="margin-bottom: .5rem;">
        <a href="{% url 'notes:detail' n.pk %}">{{ n.title }}</a>

        {% if n.tags.all %}
          {% for t in n.tags.all %}
            <span style="
                display:inline-block;
                padding:.1rem .4rem;
                border:1px solid #ddd;
                border-radius:.4rem;
                font-size:.8rem;
                margin-left:.4rem;
                background-color:#f8f8f8;
              ">
              {{ t.name }}
            </span>
          {% endfor %}
        {% endif %}
      </li>
    {% empty %}
      <li>Geen notities{% if active_tag %} met tag "{{ active_tag }}"{% endif %}</li>
    {% endfor %}
  </ul>
{% endblock %}
